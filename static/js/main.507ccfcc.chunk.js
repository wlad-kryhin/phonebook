(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return d})),n.d(t,"g",(function(){return j})),n.d(t,"f",(function(){return b})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return a})),n.d(t,"j",(function(){return s}));var c=n(5),r=Object(c.b)("items/filter"),a=Object(c.b)("items/fetchItemsRequest"),s=Object(c.b)("items/fetchItemsSuccess"),u=Object(c.b)("items/fetchItemsError"),i=Object(c.b)("items/addItemsRequest"),o=Object(c.b)("items/addItemsSuccess"),l=Object(c.b)("items/addItemsError"),b=Object(c.b)("items/deleteItemsRequest"),j=Object(c.b)("items/deleteItemsSuccess"),d=Object(c.b)("items/deleteItemsError")},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var c=function(e){return e.auth.isLoggedIn},r=function(e){return e.auth.user.name}},17:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return O}));var c=n(18),r=n.n(c),a=n(23),s=n(19),u=n.n(s),i=n(5);u.a.defaults.baseURL="https://connections-api.herokuapp.com/";var o=function(e){u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){u.a.defaults.headers.common.Authorization=""},b=Object(i.c)("auth/register",function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("users/signup",t);case 3:return n=e.sent,c=n.data,o(c.token),e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),j=Object(i.c)("auth/login",function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),e.next=4,u.a.post("users/login",t);case 4:return n=e.sent,o(n.data.token),e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),d=Object(i.c)("auth/logout",Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("users/logout");case 3:return t=e.sent,l(),e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))),O=Object(i.c)("auth/refresh",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return o(a),e.prev=5,e.next=8,u.a.get("/users/current");case 8:return s=e.sent,i=s.data,console.log(i),e.abrupt("return",i);case 14:return e.prev=14,e.t0=e.catch(5),e.abrupt("return",alert(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}())},35:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(26),s=n.n(a),u=(n(35),n(7)),i=n(16),o=n(1);function l(){return Object(o.jsxs)("ul",{className:"nav__list",children:[Object(o.jsx)("li",{className:"nav__item",children:Object(o.jsx)(i.c,{to:"/registration",exact:!0,className:"nav_link",activeClassName:"nav_link-active",children:"Registration"})}),Object(o.jsx)("li",{children:Object(o.jsx)(i.c,{to:"/login",exact:!0,className:"nav_link",activeClassName:"nav_link-active",children:"Log in"})})]})}var b=n(15);function j(){var e=Object(u.c)(b.a);return Object(o.jsx)("nav",{children:Object(o.jsxs)("ul",{className:"nav__list",children:[Object(o.jsx)("li",{className:"nav__item",children:Object(o.jsx)(i.c,{to:"/",exact:!0,className:"nav_link",activeClassName:"nav_link-active",children:"Home"})}),e&&Object(o.jsx)("li",{children:Object(o.jsx)(i.c,{exact:!0,to:"/contacts",className:"nav_link",activeClassName:"nav_link-active",children:"Contacts"})})]})})}var d=n(17),O=n(34);function f(){var e=Object(u.b)(),t=Object(u.c)(b.b);return Object(o.jsxs)("div",{className:"user__menu",children:[Object(o.jsx)("button",{className:"button",type:"button",onClick:function(){return e(Object(d.c)())},children:"Log out"}),Object(o.jsxs)("p",{className:"welcome",children:["Welcome :"," ",Object(o.jsxs)("span",{className:"user__nameOK",children:[" ",t," ",Object(o.jsx)(O.d,{})]})]})]})}function h(){var e=Object(u.c)(b.a);return console.log(e),Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)(j,{}),e?Object(o.jsx)(f,{}):Object(o.jsx)(l,{})]})}var m=n(3),p=n(20),v=n(28),x=["children"];function g(e){var t=e.children,n=Object(v.a)(e,x),c=Object(u.c)(b.a);return Object(o.jsx)(m.b,Object(p.a)(Object(p.a)({},n),{},{children:c?t:Object(o.jsx)(m.a,{to:"/"})}))}var k=["children","restricted"];function _(e){var t=e.children,n=e.restricted,c=void 0!==n&&n,r=Object(v.a)(e,k),a=Object(u.c)(b.a)&&c;return Object(o.jsx)(m.b,Object(p.a)(Object(p.a)({},r),{},{children:a?Object(o.jsx)(m.a,{to:"/contacts"}):t}))}var y=n(46),N=n.n(y),I=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,104))})),w=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,108))})),L=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,105))})),C=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,106))}));var S,F,z,R=function(){var e=Object(u.b)();return Object(c.useEffect)((function(){e(Object(d.a)())}),[e]),Object(o.jsxs)("div",{className:"container__app",children:[Object(o.jsx)(h,{}),Object(o.jsx)(m.d,{children:Object(o.jsxs)(c.Suspense,{fallback:Object(o.jsx)(N.a,{type:"BallTriangle",color:"#00BFFF",height:80,width:80}),children:[Object(o.jsx)(_,{path:"/",exact:!0,children:Object(o.jsx)(I,{})}),Object(o.jsx)(g,{path:"/contacts",exact:!0,children:Object(o.jsx)(w,{})}),Object(o.jsx)(_,{path:"/registration",exact:!0,restricted:!0,children:Object(o.jsx)(L,{})}),Object(o.jsx)(_,{path:"/login",restricted:!0,exact:!0,children:Object(o.jsx)(C,{})})]})})]})},T=n(6),B=n(50),E=n(8),q=n(5),A=n(14),J=Object(q.d)([],(S={},Object(T.a)(S,A.j,(function(e,t){return t.payload})),Object(T.a)(S,A.c,(function(e,t){var n=t.payload;return e.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}))?alert("This name is already in contacts."):e.find((function(e){return e.number===n.number}))?alert("This phone number is already in contacts."):[].concat(Object(B.a)(e),[n])})),Object(T.a)(S,A.g,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),S)),P=Object(q.d)("",Object(T.a)({},A.d,(function(e,t){return t.payload}))),W=Object(q.d)(!1,(F={},Object(T.a)(F,A.b,(function(){return!0})),Object(T.a)(F,A.c,(function(){return!1})),Object(T.a)(F,A.a,(function(){return!1})),Object(T.a)(F,A.f,(function(){return!0})),Object(T.a)(F,A.g,(function(){return!1})),Object(T.a)(F,A.e,(function(){return!1})),F)),D=Object(E.b)({items:J,filter:P,isLoading:W}),H=n(32),K=n(47),M=n.n(K),U=n(48),V=n.n(U),G=Object(q.e)({name:"auth",initialState:{user:{name:"",email:""},token:null,isLoggedIn:!1},extraReducers:(z={},Object(T.a)(z,d.d.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),Object(T.a)(z,d.b.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(T.a)(z,d.c.fulfilled,(function(e){e.user={name:"",email:""},e.token=null,e.isLoggedIn=!1})),Object(T.a)(z,d.a.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),z)}),Q=G.reducer,X={key:"auth",storage:M.a,whitelist:["token"]},Y=Object(H.a)(X,Q),Z=Object(q.a)({reducer:{auth:Y,contacts:D},middleware:function(e){return e().concat(V.a)},devTools:!1}),$=Object(H.b)(Z),ee=n(49),te=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,107)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(u.a,{store:Z,children:Object(o.jsx)(ee.a,{loading:null,persistor:$,children:Object(o.jsx)(i.a,{children:Object(o.jsx)(R,{})})})})}),document.getElementById("root")),te()}},[[99,1,2]]]);
//# sourceMappingURL=main.507ccfcc.chunk.js.map